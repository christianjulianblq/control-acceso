<!-- by christian julian gonzalez espinoza -->
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Control de acceso Secretar铆a de Desarrollo Econ贸mico</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script src="config.js"></script>

<style>
  :root{
    --primary:#133f66;         /* Azul acero */
    --bg:#201d42;              /* Fondo principal */
    --card:rgba(32,29,66,0.9); /* Fondo tarjetas */
    --text:#f2f3f5;            /* Texto principal */
    --text-muted:#bbc0ce;      /* Texto secundario */
    --border:#828097;          /* Bordes y detalles */
  }

  *{ box-sizing:border-box; }
  body{
    margin:0;
    font-family:'Orbitron',sans-serif;
    color:var(--text);
    background:var(--bg);
  }

  header{
    position:fixed;
    top:0; left:0; right:0;
    display:flex;
    align-items:center;
    gap:12px;
    padding:8px 14px;
    background:#17153a;
    border-bottom:1px solid var(--border);
    box-shadow:0 0 12px var(--primary);
    z-index:10;
  }
  header img{
    height:44px;
    width:auto;
    border-radius:8px;
  }
  header h1{
    margin:0;
    font-size:1rem;
    color:var(--text);
    text-shadow:0 0 8px var(--primary);
    flex:1;
    text-align:center;
  }
  #logout-btn{
    background:var(--primary);
    color:var(--text);
    border:none;
    padding:6px 12px;
    font-size:.9rem;
    border-radius:6px;
    cursor:pointer;
    display:none;
    transition:0.2s;
  }
  #logout-btn:hover{
    filter:brightness(1.2);
    box-shadow:0 0 10px var(--border);
  }

  main{
    padding:86px 12px 24px;
    max-width:820px;
    margin:auto;
  }

  .card{
    background:var(--card);
    padding:16px;
    border-radius:14px;
    box-shadow:0 0 12px var(--border);
    border:1px solid var(--border);
  }

  .tab-buttons{
    display:flex;
    gap:8px;
    margin-bottom:12px;
  }
  .tab-buttons button{
    flex:1;
    padding:10px 12px;
    border:none;
    border-radius:10px;
    background:var(--primary);
    color:var(--text);
    cursor:pointer;
    font-size:1rem;
    transition:0.2s;
  }
  .tab-buttons button:hover{
    background:var(--border);
    color:var(--bg);
  }

  input,select,button,label{ font-size:1rem; }
  input,select{
    width:100%;
    padding:12px;
    margin:6px 0;
    border:1px solid var(--border);
    border-radius:10px;
    background:#2b2855;
    color:var(--text);
  }
  input::placeholder{ color:var(--text-muted); }

  button[type=submit]{
    width:100%;
    background:var(--primary);
    color:var(--text);
    border:none;
    border-radius:10px;
    padding:12px;
    cursor:pointer;
    font-size:1rem;
    margin-top:10px;
  }
  button[type=submit]:hover{
    background:var(--border);
    color:var(--bg);
  }

  #reader{ width:min(420px, 95vw); margin:14px auto; }
  #scan-btn{
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    background:var(--primary);
    color:var(--text);
    cursor:pointer;
    margin-top:10px;
  }
  #scan-btn:hover{
    background:var(--border);
    color:var(--bg);
  }

  #qrcode{ text-align:center; margin-top:12px; }
  #qrcode canvas{ display:block; margin:8px auto; }

  #login-msg{ margin-top:8px; color:#ffb3b3; }
  .helper{ font-size:.92rem; opacity:.85; text-align:center; color:var(--text-muted); }

  .hidden{ display:none !important; }
</style>
</head>
<body>
<header>
  <img src="NuevaHeraldica.png" alt="Logo">
  <h1>Control de acceso Secretar铆a de Desarrollo Econ贸mico</h1>
  <button id="logout-btn" type="button">Cerrar sesi贸n</button>
</header>

<main>
  <!-- LOGIN -->
  <section id="login-section" class="card">
    <h2>Iniciar sesi贸n</h2>
    <input type="text" id="login-user" placeholder="Usuario" autocomplete="username" />
    <input type="password" id="login-pass" placeholder="Contrase帽a" autocomplete="current-password" />
    <button id="login-btn" type="button">Entrar</button>
    <div id="login-msg"></div>
  </section>

  <!-- APP -->
  <section id="app-section" class="hidden">
    <div class="tab-buttons">
      <button data-tab="qr">Registro con cita</button>
      <button data-tab="visitantes">Registro sin cita</button>
      <button data-tab="buscar">Buscar acceso</button>
    </div>

    <!-- REGISTRO QR -->
    <form id="form-qr" class="card tab-content">
      <h3>Registro QR</h3>
      <input type="text" id="qr-nombre" placeholder="Nombre completo" required />
      <input type="email" id="qr-correo" placeholder="Correo" required />
      <input type="tel" id="qr-telefono" placeholder="Tel茅fono" />
      <input type="text" id="qr-motivo" placeholder="Motivo" />
      <input type="text" id="qr-delegacion" placeholder="Delegaci贸n (opcional)" />
      <input type="text" id="qr-negocio" placeholder="Negocio (opcional)" />
      <label for="qr-fecha">Fecha de la cita:</label>
      <input type="date" id="qr-fecha" required />
      <label for="qr-departamento">Departamento:</label>
      <select id="qr-departamento" required>
        <option value="Oficina del Secretario">Oficina del Secretario</option>
        <optgroup label="Direcci贸n de Impulso Econ贸mico">
          <option>Direcci贸n de Impulso Econ贸mico</option>
          <option>Licencias de Funcionamiento</option>
          <option>Fomento al Empleo</option>
        </optgroup>
        <option>Direcci贸n de Emprendimiento</option>
        <option>Direcci贸n de Desarrollo Rural y Agropecuario</option>
      </select>
      <label for="qr-hora-entrada">Hora de entrada:</label>
      <input type="time" id="qr-hora-entrada" required />
      <label for="qr-hora-salida">Hora de salida:</label>
      <input type="time" id="qr-hora-salida" required />
      <button type="submit">Registrar entrada QR</button>

      <div id="qrcode" class="hidden">
        <h4>QR generado</h4>
      </div>
    </form>

    <!-- REGISTRO VISITANTES -->
    <form id="form-visitantes" class="card tab-content hidden">
      <h3>Registro Visitantes</h3>
      <input type="text" id="vis-nombre" placeholder="Nombre completo" required />
      <input type="email" id="vis-correo" placeholder="Correo electr贸nico" required />
      <input type="date" id="vis-fecha-nac" placeholder="Fecha de nacimiento" required />
      <input type="text" id="vis-domicilio" placeholder="Domicilio" required />
      <input type="tel" id="vis-telefono" placeholder="Tel茅fono" required />
      <input type="text" id="vis-motivo" placeholder="Motivo" />
      <input type="text" id="vis-delegacion" placeholder="Delegaci贸n (opcional)" />
      <input type="text" id="vis-negocio" placeholder="Negocio (opcional)" />
      <select id="vis-departamento" required>
        <option value="Oficina del Secretario">Oficina del Secretario</option>
        <optgroup label="Direcci贸n de Impulso Econ贸mico">
          <option>Direcci贸n de Impulso Econ贸mico</option>
          <option>Licencias de Funcionamiento</option>
          <option>Fomento al Empleo</option>
        </optgroup>
        <option>Direcci贸n de Emprendimiento</option>
        <option>Direcci贸n de Desarrollo Rural y Agropecuario</option>
      </select>
      <label>Hora de entrada:</label>
      <input type="time" id="vis-hora-entrada" required />
      <label>Hora de salida:</label>
      <input type="time" id="vis-hora-salida" required />
      <button type="submit">Registrar visitante</button>
    </form>

    <!-- BUSCAR / ESCANEO -->
    <div id="buscar-acceso" class="card tab-content hidden">
      <h3>Buscar acceso</h3>
      <input type="text" id="buscar-nombre" placeholder="Buscar por nombre..." />
      <div id="resultado" style="white-space:pre-wrap; margin-top:8px;"></div>
      <button id="scan-btn" type="button"> Escanear QR con la c谩mara</button>
      <div id="reader" class="hidden"></div>
      <p id="scan-help" class="helper hidden">Apunta tu c谩mara al QR para registrar acceso</p>
    </div>
  </section>
</main>

<!-- === Tu JavaScript original se mantiene igual === -->
<script>
  /* Copia aqu铆 el mismo bloque JS que ya ten铆as en tu archivo original */
</script>

</body>
</html>
<!-- by christian julian gonzalez espinoza -->
